# FST 30min Poker Drill 使用マニュアル

本アプリは、ポーカーの瞬間暗算ドリルをローカルで毎日回すためのミニ Web アプリです。POT ODDS（コールに必要な勝率）、FE（ブレイクイーブン・ブラフに必要なフォールド率）、RANGE3（強/中/弱のレンジ3箱判定）を素早く反復練習できます。

----------------------------------------

## セットアップ
- 前提: Node.js LTS（推奨）
  - Windows の例: PowerShell で `winget install OpenJS.NodeJS.LTS`
- 手順:
  - `cd fst-drill`
  - `npm i`
  - `npm run dev`
  - ブラウザで `http://localhost:5173` を開く
- ビルド（任意）:
  - `npm run build`
  - `npm run preview` でローカル確認

----------------------------------------

## 画面構成と基本操作
- モード選択: `MIXED / POT_ODDS / FE / RANGE3`
  - MIXED は上記3種類を均等にランダム出題します。
- タイマー: プリセット `30 / 45 / 60` 分 + カスタム入力（5–180分）
  - `Start / Pause / Reset` が可能。時間切れで強制終了（操作不可のオーバーレイ表示）。
- 出題と回答:
  - 画面中央に問題、下に選択肢（クリックまたはホットキー）
  - 回答後に正誤と解説を表示
- 統計とミス管理:
  - Stats: 回答数、正答数、正答率、平均回答時間を表示（localStorage保存）
  - Mistakes: 間違えた問題を自動保存。`Review mistakes only` でミスだけを反復出題。
  - `Reset Stats` で統計初期化、`Clear Mistakes` でミス箱を空にできます。

----------------------------------------

## ドリル仕様
- POT_ODDS（必要勝率）
  - 式: 必要勝率 = `b / (p + 2b)`
  - 例: ポット `p=100`、ベット `b=50` → `50 / (100 + 100) = 25%`
  - 4択には典型的な誤答パターンも混ぜます（学習効率向上のため）。
- FE（ブレイクイーブン・ブラフ必要フォールド率）
  - 式: 必要フォールド率 = `b / (p + b)`
  - 例: ポット `p=100`、ベット `b=50` → `50 / (100 + 50) = 33.3…%`
- RANGE3（レンジ3箱判定）
  - 内容: ハンドカテゴリ + ボードテクスチャ + ポジション(IP/OOP)から「Strong / Medium / Weak」を瞬時に分類。
  - 実装: 簡易ヒューリスティックでスコアリングし、3択で判定。
  - 例: Overpair × Dry High(A72r) × IP → 強め寄り → Strong

----------------------------------------

## ホットキー
- `1..4` : 選択（RANGE3 は3択のため `1..3` を使用）
- `N` : 次の問題
- `S` / `Space` : 開始 / 一時停止
- `R` : タイマーリセット
- 備考: 入力欄（カスタム時間）にフォーカス中はショートカットは無効化されます。

----------------------------------------

## ミス復習
- 間違えた問題は自動的に Mistakes に保存されます。
- `Review mistakes only` をオンにすると、保存済みミスのみを出題します。
- 同じ問題に正解すると、その問題は Mistakes から自動削除されます。
- `Clear Mistakes` で一括削除可能。

----------------------------------------

## トラブルシューティング
- 5173番ポートが使用中:
  - `npm run dev -- --port 5174` のようにポート指定して起動可能。
- 画面が更新されない / 操作できない:
  - タイマー時間切れの場合はオーバーレイが出ているため、`Reset` して再開してください。
- 統計やミスを初期化したい:
  - 画面の `Reset Stats` / `Clear Mistakes` ボタン、またはブラウザの `localStorage` を手動でクリア。
- ショートカットが効かない:
  - 入力欄にカーソルがあるときは無効化されます。フォーカスを外してください。

----------------------------------------

## よくある質問（FAQ）
- Q. MIXED の出題比率は？
  - A. POT_ODDS / FE / RANGE3 を均等（約1/3ずつ）に出題します。
- Q. カスタム時間の最小/最大は？
  - A. 5–180分の範囲で設定できます。
- Q. データの保存先は？
  - A. 統計とミスはブラウザの `localStorage` に保存されます（ブラウザを変えると引き継がれません）。

----------------------------------------

## 開発者向けメモ（任意）
- 依存: Vite + React 18 + TypeScript
- 起動: `npm run dev` / ビルド: `npm run build`
- メイン実装: `fst-drill/src/App.tsx`
- スタイル: `fst-drill/src/index.css`

以上。毎日の30分ドリルで「即答力」を底上げしましょう。
